# Hash Bert

## RRS


| Models             | R10@1 | R10@2 | R10@5 | MRR   |  P@1  |  MAP   |
| ------------------ | ----- | ----- | ----- | ----- | ----- | ------ |
| BERT               | 41.35 | 61.84 | 88.21 | 64.35 | 45.96 | 63.18  |
| SA-BERT            | 44.44 | 65.3  | 92.17 | 66.97 | 48.79 | 66.03  |
| BERT-FP            | 49.32 | 69.89 | 91.86 | 70.81 | 54.55 | 69.8   |
| DR-BERT            | 54.51 | 73.31 | 94.42 | 75.05 | 60.97 | 73.69  |
| Hash-BERT(lr=1e-3,bsz=128,hash_code=4096,dr-bert-normalization)     | 50.49 | 69.85 | 89.87 | 71.66 | 56.14 | 70.22  |
| Hash-BERT(lr=1e-3,bsz=128,hash_code=4096)     | 46.41 | 67.92 | 89.59 | 69.45 | 52.92 | 67.57  |
| Hash-BERT(lr=1e-3,bsz=128,hash_code=2048)     | 47.87 | 67.17 | 90.14 | 69.89 | 54.12 | 68.3   |
| Hash-BERT(lr=1e-3,bsz=256,hash_code=2048)     | 47.79 | 65.04 | 90.59 | 69.37 | 53.92 | 67.78  |
| Hash-BERT(lr=1e-3,bsz=128,hash_code=2048)     | 47.33 | 66.38 | 90.38 | 69.49 | 53.52 | 67.7   |
| Hash-BERT(lr=1e-3,bsz=128,hash_code=1024)     | 47.35 | 67.76 | 89.19 | 69.45 | 53.32 | 68.01  |
| Hash-BERT(lr=1e-3,bsz=128,hash_code=512)      | 47.4  | 63.82 | 89.29 | 68.77 | 53.52 | 66.94  |
| Hash-BERT(lr=1e-3,bsz=256,hash_code=512)      | 46.06 | 65.54 | 88.2  | 68.67 | 52.52 | 66.87  |
| Hash-BERT(lr=1e-3,bsz=256,hash_code=512)      | 45.69 | 64.54 | 88.83 | 68.38 | 52.11 | 66.44  |
| Hash-BERT(lr=1e-3,bsz=128,hash_code=512,tanh) | 46.45 | 66.01 | 89.82 | 68.75 | 52.72 | 66.78|
| Hash-BERT(lr=1e-3,bsz=128,hash_code=512,no-kl)| 45.79 | 64.52 | 88.2  | 67.75 | 51.91 | 66.1 |
| Hash-BERT(lr=1e-3,bsz=128,hash_code=128,multi_tower_dim=512)      | 46.63 | 66.0 | 89.62 | 68.66 | 52.72 | 67.09 |
| Hash-BERT(lr=1e-3,bsz=128,hash_code=128)      | 43.36 | 59.96 | 88.4 | 65.9 | 49.7 | 63.88 |



| Models             | R10@1 | R10@2 | R10@5 | MRR   |  P@1  |  MAP   |
| ------------------ | ----- | ----- | ----- | ----- | ----- | ------ |
| BERT               | 41.35 | 61.84 | 88.21 | 64.35 | 45.96 | 63.18  |
| SA-BERT            | 44.44 | 65.3  | 92.17 | 66.97 | 48.79 | 66.03  |
| BERT-FP            | 49.32 | 69.89 | 91.86 | 70.81 | 54.55 | 69.8   |
| DR-BERT            | 54.33 | 73.09 | 93.36 | 74.85 | 60.76 | 73.59  |
| DR-BERT+LSH(256)   | 35.83 | 50.18 | 76.78 | 57.79 | 40.85 | 55.69  |
| DR-BERT+LSH(1024)  | 35.98 | 53.69 | 79.73 | 58.64 | 40.44 | 57.18  |
| DR-BERT+LSH(4096)  | 35.98 | 53.69 | 79.73 | 58.64 | 40.44 | 57.18  |
| Hash-BERT(lr=1e-3,bsz=128,hash_code=256)   | 39.92  | 58.33  | 84.17  | 62.64 | 45.27 | 61.02  |
| Hash-BERT(lr=1e-3,bsz=128,hash_code=4096)  | 42.82  | 59.29 | 86.65 | 64.65 | 48.09 | 63.25  |
| BPR(lr=1e-3,bsz=128,hash_code=256)         |  |  |  |  |  |   |
| BPR(lr=1e-3,bsz=128,hash_code=4096)        | 25.94  | 45.91 | 74.87 | 50.54 | 29.58 | 49.48  |

| Models             | R10@1 | R10@2 | R10@5 | MRR   |  P@1  |  MAP   |
| ------------------ | ----- | ----- | ----- | ----- | ----- | ------ |
| BERT               | 41.35 | 61.84 | 88.21 | 64.35 | 45.96 | 63.18  |
| SA-BERT            | 44.44 | 65.3  | 92.17 | 66.97 | 48.79 | 66.03  |
| BERT-FP            | 49.32 | 69.89 | 91.86 | 70.81 | 54.55 | 69.8   |
| DR-BERT            | 54.51 | 73.31 | 94.42 | 75.05 | 60.97 | 73.69  |
| HDR-BERT-ColBERT   | 52.3  | 70.69 | 92.71 | 72.92 | 58.35 | 71.55  |
| HDR-BERT-Trs-NoColBERT   | 51.31  | 71.33 | 91.73 | 72.26 | 56.74 | 70.89  |
| HDR-BERT+LSH(256)  | 25.29 | 41.2  | 73.09 | 49.47 | 29.78 | 47.63  |
| HDR-BERT+LSH(1024) | 37.19 | 53.87 | 83.47 | 59.87 | 42.05 | 58.47  |
| BPR-HDR-BERT-Trs-NoColBERT(hash_code=512)   | 40.27  | 61.32 | 87.91 | 63.51 | 44.47 | 62.47  |
| BPR-HDR-BERT-Trs-NoColBERT-VAELoss(hash_code=512)   | 38.62  | 61.33 | 88.58 | 63.0 | 43.06 | 61.92  |
| BPR-HDR-BERT(lr=1e-3,bsz=128,hash_code=256) | 43.36 | 61.67 | 88.28 | 65.84 | 48.89 | 64.13  |
| BPR-HDR-BERT(lr=1e-3,bsz=128,hash_code=512) | 42.97 | 61.67 | 88.06 | 65.39 | 48.29 | 64.06  |




| Models             | R10@1 | R10@2 | R10@5 | MRR   |  P@1  |  MAP   |
| ------------------ | ----- | ----- | ----- | ----- | ----- | ------ |
| BERT               | 41.35 | 61.84 | 88.21 | 64.35 | 45.96 | 63.18  |
| SA-BERT            | 44.44 | 65.3  | 92.17 | 66.97 | 48.79 | 66.03  |
| BERT-FP            | 49.32 | 69.89 | 91.86 | 70.81 | 54.55 | 69.8   |
| DR-BERT            | 54.51 | 73.31 | 94.42 | 75.05 | 60.97 | 73.69  |
| HDR-BERT-ColBERT   | 52.3  | 70.69 | 92.71 | 72.92 | 58.35 | 71.55  |
| HDR-BERT-Trs       |  |  |  |  |  |   |
| HDR-BERT-Trs-MV(801)    | 51.31 | 71.33 | 91.73 | 72.26 | 56.74 | 70.89  |
| HDR-BERT-GPT-MV(802)    | 51.21 | 67.34 | 91.21 | 71.25 | 56.74 | 70.02  |



<!-- restoration-200k recall test -->
| Models | Top-100 | Relevance-100 | PPL-100 |
| ------ | ------- | ------------- | ------- |
| LSH(256)        | 0.0624        | 64.04              |   29.1741      |
| Hash-BERT(256)  | 0.0201        | 66.99              |   27.0473      |

